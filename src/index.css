@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* Primary: Burnished Gold — editorial warmth */
  --color-forest-50: #faf8f0;
  --color-forest-100: #f5f0e6;
  --color-forest-200: #e8dcc4;
  --color-forest-300: #d4c49a;
  --color-forest-400: #c49536;
  --color-forest-500: #a0782c;
  --color-forest-600: #8a6825;
  --color-forest-700: #6e5220;
  --color-forest-800: #553f1a;
  --color-forest-900: #3d2e14;

  /* Neutral: Cool ivory to deep ink */
  --color-blush-50: #f7f6f3;
  --color-blush-100: #f0eeeb;
  --color-blush-200: #e8e6e1;
  --color-blush-300: #d4d1cc;
  --color-blush-400: #9c9891;
  --color-blush-500: #64615c;
  --color-blush-600: #4a4844;
  --color-blush-700: #353330;
  --color-blush-800: #1c1b19;
  --color-blush-900: #121108;

  /* Accent: Deep ink */
  --color-pop-50: #f0f2f5;
  --color-pop-100: #d8dce5;
  --color-pop-200: #b0b8c8;
  --color-pop-300: #8892a8;
  --color-pop-400: #5c6a82;
  --color-pop-500: #3d4d66;
  --color-pop-600: #2d3a50;
  --color-pop-700: #1f2a3d;
  --color-pop-800: #1a2332;
  --color-pop-900: #0f1117;

  /* Studio colors */
  --color-studio-awh: #ec4899;
  --color-studio-caa: #6b8f71;
  --color-studio-starbound: #f59e0b;

  /* Semantic accent colors */
  --color-sage: #6b8f71;
  --color-sage-light: #8aab8f;
  --color-sage-dark: #557259;
  --color-rose-accent: #c4878e;
  --color-rose-accent-light: #d4a0a6;
  --color-rose-accent-dark: #a36b72;
  --color-honey: #a0782c;
  --color-honey-light: #c49536;
  --color-honey-dark: #8a6825;
}

:root {
  --color-forest: var(--color-forest-500);
  --color-forest-light: var(--color-forest-400);
  --color-forest-dark: var(--color-forest-600);

  --color-blush: var(--color-blush-200);
  --color-blush-dark: var(--color-blush-300);
  --color-blush-light: var(--color-blush-100);

  --color-pop: var(--color-pop-500);
  --color-pop-light: var(--color-pop-400);
  --color-pop-dark: var(--color-pop-600);

  --color-awh: #ec4899;
  --color-caa: #6b8f71;
  --color-starbound: #f59e0b;

  --color-primary: var(--color-forest);
  --color-primary-dark: var(--color-forest-dark);

  /* Font families — Fraunces for display, Inter for body */
  --font-display: 'Fraunces', Georgia, 'Times New Roman', serif;
  --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;

  /* ── Semantic Surfaces ── */
  --surface-primary: #f7f6f3;
  --surface-card: #ffffff;
  --surface-card-hover: #f0eeeb;
  --surface-inset: #f0eeeb;
  --surface-elevated: #ffffff;
  --surface-highlight: #faf8f0;

  /* ── Semantic Text ── */
  --text-primary: #121108;
  --text-secondary: #64615c;
  --text-tertiary: #9c9891;
  --text-on-accent: #ffffff;

  /* ── Accent ── */
  --accent-primary: #a0782c;
  --accent-primary-hover: #c49536;
  --accent-secondary: #1a2332;
  --accent-muted: #f5f0e6;

  /* ── Borders ── */
  --border-subtle: #e8e6e1;
  --border-strong: #c49536;

  /* ── Status ── */
  --status-success: #16a34a;
  --status-warning: #b45309;
  --status-danger: #dc2626;

  /* ── Elevation ── */
  --shadow-card: 0 1px 3px 0 rgba(156, 152, 145, 0.1), 0 1px 2px -1px rgba(156, 152, 145, 0.1);
  --shadow-elevated: 0 10px 15px -3px rgba(156, 152, 145, 0.15), 0 4px 6px -4px rgba(156, 152, 145, 0.1);
  --shadow-card-hover: 0 4px 6px -1px rgba(156, 152, 145, 0.12), 0 2px 4px -2px rgba(156, 152, 145, 0.1);

  /* ── Radius ── */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-full: 9999px;

  /* ── Mood Layer (set dynamically by moodLayer.ts, defaults = no-op) ── */
  --mood-surface-tint: var(--surface-primary);
  --mood-accent-intensity: 1;
  --mood-shadow-intensity: 1;
  --mood-border-opacity: 1;
  --mood-ambient-glow: transparent;

  /* ── Motion ── */
  --duration-instant: 100ms;
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --duration-slow: 400ms;
  --duration-page: 300ms;
  --ease-default: cubic-bezier(0.25, 0.1, 0.25, 1);
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: var(--font-body);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--mood-surface-tint);
  color: var(--text-primary);
}

#root {
  min-height: 100dvh;
  min-height: 100vh; /* fallback */
}

/* Skip navigation link */
.skip-link {
  position: absolute;
  top: -100%;
  left: 0;
  background: var(--color-forest-600);
  color: white;
  padding: 0.75rem 1.5rem;
  z-index: 100;
  font-weight: 600;
  font-size: 0.875rem;
  border-radius: 0 0 0.5rem 0;
  text-decoration: none;
}

.skip-link:focus {
  top: 0;
}

/* Screen reader only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Keyboard focus styles — terracotta ring */
:focus-visible {
  outline: 2px solid var(--color-forest-500);
  outline-offset: 2px;
  border-radius: 6px;
}

/* Remove default focus for mouse users */
:focus:not(:focus-visible) {
  outline: none;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: var(--color-blush-100);
}

::-webkit-scrollbar-thumb {
  background: var(--color-blush-300);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-blush-400);
}

/* Safe area */
.pb-safe {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

/* Touch improvements */
button, a, input, select, textarea {
  -webkit-tap-highlight-color: transparent;
}

html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Mobile + iPad: generous touch targets and prevent zoom on input focus */
@media (max-width: 1024px) {
  button, a {
    min-height: 44px;
    min-width: 44px;
  }
  input, select, textarea {
    font-size: 16px !important;
  }
}

/* Responsive page content width - use .page-w instead of max-w-lg for page containers */
.page-w {
  max-width: 32rem;
  margin-left: auto;
  margin-right: auto;
}

@media (min-width: 768px) {
  .page-w {
    max-width: 48rem;
  }
}

@media (min-width: 1280px) {
  .page-w {
    max-width: 56rem;
  }
}

body {
  overscroll-behavior-y: contain;
}

.overflow-y-auto,
.overflow-x-auto {
  -webkit-overflow-scrolling: touch;
}

/* Prevent inner scroll from propagating to PullToRefresh */
textarea,
.overscroll-contain {
  overscroll-behavior: contain;
}

.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Time of day gradients — warm stone palette */
.bg-time-morning {
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
}

.bg-time-afternoon {
  background: linear-gradient(135deg, #fae8db 0%, #f4ccb3 100%);
}

.bg-time-evening {
  background: linear-gradient(135deg, #ede6de 0%, #d6d0c8 100%);
}

/* Dark mode - disable time gradients, use solid dark */
.dark .bg-time-morning,
.dark .bg-time-afternoon,
.dark .bg-time-evening {
  background: var(--color-blush-900);
}

/* Confetti burst — wellness checklist all-done celebration */
@keyframes confetti-fall {
  0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
  80% { opacity: 1; }
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}

.confetti-particle {
  animation: confetti-fall linear forwards;
}

/* Rainbow swatch spin — Pride theme selected state */
@keyframes swatch-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.swatch-rainbow-spin {
  animation: swatch-spin 3s linear infinite;
}

/* Teaching Now hero — left border pulse */
@keyframes teaching-border-breathe {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.35; }
}

.teaching-border-pulse {
  animation: teaching-border-breathe 2s ease-in-out infinite;
}

/* Live class pulse */
@keyframes live-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 color-mix(in srgb, var(--color-forest-500) 40%, transparent);
  }
  50% {
    box-shadow: 0 0 0 8px color-mix(in srgb, var(--color-forest-500) 0%, transparent);
  }
}

.live-class-card {
  animation: live-pulse 2s ease-in-out infinite;
  border: 2px solid var(--color-forest-500);
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

.live-dot {
  animation: blink 1s ease-in-out infinite;
}

/* Dark mode - comprehensive support */
html.dark {
  background-color: #0f1117;
  color-scheme: dark;

  --surface-primary: #0f1117;
  --surface-card: #171b24;
  --surface-card-hover: #252a35;
  --surface-inset: #0c0e14;
  --surface-elevated: #171b24;
  --surface-highlight: rgba(164, 120, 44, 0.1);

  --text-primary: #e8e4df;
  --text-secondary: #9c9891;
  --text-tertiary: #64615c;

  --accent-primary: #d4a843;
  --accent-primary-hover: #e4be5e;
  --accent-secondary: #8892a8;
  --accent-muted: rgba(164, 120, 44, 0.12);

  --border-subtle: #252a35;
  --border-strong: #d4a843;

  --status-success: #22c55e;
  --status-warning: #f59e0b;
  --status-danger: #ef4444;

  --shadow-card: 0 1px 3px 0 rgba(0, 0, 0, 0.3);
  --shadow-elevated: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -4px rgba(0, 0, 0, 0.3);
  --shadow-card-hover: 0 4px 6px -1px rgba(0, 0, 0, 0.35);
}

.dark body {
  background-color: var(--surface-primary);
}

.dark .bg-gray-900,
.dark .dark\:bg-blush-900 {
  background-color: var(--color-blush-900);
}

/* Dark mode scrollbar */
.dark ::-webkit-scrollbar-track {
  background: var(--color-blush-800);
}

.dark ::-webkit-scrollbar-thumb {
  background: var(--color-blush-600);
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: var(--color-blush-500);
}

/* ── Typography Scale ── */
.type-display {
  font-family: var(--font-display);
  font-weight: 700;
  font-size: 2.25rem;
  line-height: 1.15;
  letter-spacing: -0.03em;
  color: var(--text-primary);
}

.type-h1 {
  font-family: var(--font-display);
  font-weight: 700;
  font-size: 1.5rem;
  line-height: 1.25;
  letter-spacing: -0.02em;
  color: var(--text-primary);
}

.type-h2 {
  font-family: var(--font-display);
  font-weight: 600;
  font-size: 1.0625rem;
  line-height: 1.35;
  letter-spacing: -0.01em;
  color: var(--text-primary);
}

.type-h3 {
  font-family: var(--font-body);
  font-weight: 600;
  font-size: 0.8125rem;
  line-height: 1.4;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  color: var(--text-secondary);
}

.type-body {
  font-family: var(--font-body);
  font-weight: 400;
  font-size: 0.9375rem;
  line-height: 1.6;
  letter-spacing: 0;
  color: var(--text-primary);
}

.type-caption {
  font-family: var(--font-body);
  font-weight: 500;
  font-size: 0.8125rem;
  line-height: 1.4;
  letter-spacing: 0.01em;
  color: var(--text-secondary);
}

.type-label {
  font-family: var(--font-body);
  font-weight: 600;
  font-size: max(10px, 0.6875rem);
  line-height: 1.3;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  color: var(--text-secondary);
}

.type-stat {
  font-family: var(--font-display);
  font-weight: 800;
  font-size: 2.5rem;
  line-height: 1.05;
  letter-spacing: -0.03em;
  font-variant-numeric: tabular-nums;
  color: var(--text-primary);
}

/* iOS/Safari specific optimizations */
@supports (-webkit-touch-callout: none) {
  html, body {
    height: 100%;
    height: 100dvh;
    overscroll-behavior-y: none;
  }

  #root {
    height: 100%;
    height: 100dvh;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
  }
}

/* Smooth momentum scrolling for iOS */
.ios-scroll {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
}

/* Safe area insets for iPhone notch/home indicator */
.safe-area-top {
  padding-top: env(safe-area-inset-top, 0);
}

.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

.safe-area-left {
  padding-left: env(safe-area-inset-left, 0);
}

.safe-area-right {
  padding-right: env(safe-area-inset-right, 0);
}

/* Page transition animation */
@keyframes page-fade-in {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.page-enter {
  animation: page-fade-in var(--duration-page) var(--ease-default);
}

/* Bottom sheet animations */
@keyframes slide-up {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* GPU acceleration for smooth animations */
.gpu-accelerate {
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .live-class-card {
    animation: none;
  }

  .live-dot {
    animation: none;
  }

  .widget-stagger-in > *,
  .stagger-in > * {
    opacity: 1;
    animation: none;
  }

  .mood-ambient-glow::before {
    display: none;
  }
}

/* iPad specific optimizations */
@media (min-width: 768px) and (max-width: 1024px) {
  /* More generous padding for page containers on iPad */
  .page-w {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
}

/* Desktop/Mac optimizations */
@media (min-width: 1024px) {
  /* Allow hover states on desktop */
  .hover-desktop:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
}

/* Print */
@media print {
  @page {
    margin: 0.5in;
    size: letter portrait;
  }
  body {
    print-color-adjust: exact;
    -webkit-print-color-adjust: exact;
    background: white !important;
  }
  header, nav, .mobile-nav, [data-print-hide="true"] {
    display: none !important;
  }
  main {
    height: auto !important;
    overflow: visible !important;
  }
  .sticky {
    position: relative !important;
  }
}

/* ── Widget Title — Fraunces for warmth in section headers ── */
.type-widget-title {
  font-family: var(--font-display);
  font-weight: 600;
  font-size: 0.9375rem;
  line-height: 1.3;
  letter-spacing: -0.01em;
  color: var(--text-primary);
}

/* ── Widget stagger-in animation ── */
@keyframes widget-enter {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.widget-stagger-in > * {
  opacity: 0;
  animation: widget-enter var(--duration-normal) var(--ease-out) forwards;
}

.widget-stagger-in > *:nth-child(1) { animation-delay: 50ms; }
.widget-stagger-in > *:nth-child(2) { animation-delay: 100ms; }
.widget-stagger-in > *:nth-child(3) { animation-delay: 150ms; }
.widget-stagger-in > *:nth-child(4) { animation-delay: 200ms; }
.widget-stagger-in > *:nth-child(5) { animation-delay: 250ms; }
.widget-stagger-in > *:nth-child(6) { animation-delay: 300ms; }
.widget-stagger-in > *:nth-child(7) { animation-delay: 350ms; }
.widget-stagger-in > *:nth-child(8) { animation-delay: 400ms; }
.widget-stagger-in > *:nth-child(9) { animation-delay: 450ms; }
.widget-stagger-in > *:nth-child(10) { animation-delay: 500ms; }
.widget-stagger-in > *:nth-child(n+11) { animation-delay: 550ms; }

/* ── Mood-Responsive Utilities ── */

/* Ambient glow — subtle background radial for greeting/hero areas */
.mood-ambient-glow {
  position: relative;
}

.mood-ambient-glow::before {
  content: '';
  position: absolute;
  inset: -20px -40px;
  background: radial-gradient(ellipse at 30% 50%, var(--mood-ambient-glow) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
  transition: background var(--duration-slow) ease-in-out;
}

.mood-ambient-glow > * {
  position: relative;
  z-index: 1;
}

/* ── Motion System Utilities ── */

/* Staggered list entrance */
@keyframes list-item-in {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.stagger-in > * {
  opacity: 0;
  animation: list-item-in var(--duration-normal) var(--ease-out) forwards;
}

.stagger-in > *:nth-child(1) { animation-delay: 0ms; }
.stagger-in > *:nth-child(2) { animation-delay: 30ms; }
.stagger-in > *:nth-child(3) { animation-delay: 60ms; }
.stagger-in > *:nth-child(4) { animation-delay: 90ms; }
.stagger-in > *:nth-child(5) { animation-delay: 120ms; }
.stagger-in > *:nth-child(6) { animation-delay: 150ms; }
.stagger-in > *:nth-child(7) { animation-delay: 180ms; }
.stagger-in > *:nth-child(8) { animation-delay: 210ms; }
.stagger-in > *:nth-child(9) { animation-delay: 240ms; }
.stagger-in > *:nth-child(10) { animation-delay: 270ms; }
.stagger-in > *:nth-child(n+11) { animation-delay: 300ms; }

/* Day plan check-off animation */
@keyframes check-off {
  0% { transform: scale(1); opacity: 1; }
  30% { transform: scale(1.05); }
  100% { transform: scale(0.98); opacity: 0.6; }
}

.plan-item-completing {
  animation: check-off var(--duration-normal) var(--ease-out) forwards;
}

/* Streak pulse — when it's a new high */
@keyframes streak-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.08); }
}

.streak-new-high {
  animation: streak-pulse 600ms var(--ease-spring);
}

/* Progress ring draw-in */
@keyframes ring-draw {
  from { stroke-dashoffset: var(--ring-circumference); }
  to { stroke-dashoffset: var(--ring-offset); }
}

.progress-ring-animate {
  animation: ring-draw 800ms var(--ease-out) forwards;
}

/* Skeleton loading pulse */
@keyframes skeleton-pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.8; }
}

.skeleton {
  background-color: var(--surface-inset);
  border-radius: var(--radius-md);
  animation: skeleton-pulse 1.5s ease-in-out infinite;
}

/* Task completion fade */
.task-completing {
  transition: opacity var(--duration-normal) var(--ease-out),
              transform var(--duration-normal) var(--ease-out);
  opacity: 0;
  transform: translateY(-8px);
}

/* Theme transition crossfade — apply to :root when switching themes */
.theme-transitioning,
.theme-transitioning * {
  transition: background-color var(--duration-slow) ease-in-out,
              color var(--duration-slow) ease-in-out,
              border-color var(--duration-slow) ease-in-out,
              box-shadow var(--duration-slow) ease-in-out !important;
}
